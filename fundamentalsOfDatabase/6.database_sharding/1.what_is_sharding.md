### What is sharding
- Sharding is a technique to split the table into multiple database server , let's say we have 1 million rows and we can keep 200k in one db then another 200k in another db and so on..
- we can shard table based on region , userid , or based on rows
- but what if we dont have any such column, let's say url shortener , where request is url/5TOK8J based on 5TOK8J this value we need to query our db
- for such a scenario we cna do hashing

### Consistent hashing
-  in this case we create some hashing function to get the exact db port address in order to connect to correct db
-  let's say we have 3 db , and we get some user input let's say input1 and it goes 5432 and input2 hashing function gives us 5433 then we connect to this db with port 5433

### Spin up docker postgres shards
- let's first create a query sql file in order to create table at the time of spining up docker
- init.sql ```create table URL_TABLE (id serial not null PRIMARY KEY, URL text, URL_ID character(5))```
- we will now create a docker file ```vim Dockerfile``` inside this file add below command
- ```
  FROM postgres
  env POSTGRES_PASSWORD=postgres
  COPY init.sql /docker-entrypoint-initdb.d
  ```
- ```docker build -t pgshard . ``` let's build the image from Dockerfile ,I don't want to run my postgres from just the vanilla postgres image.
- let's spin up some containers. ```podman run --name pgshard1 -p 5432:5432 -d pgshard``` The container exposes Postgres on port 5432 internally, and maps it to 5432 on your host.
- ```podman run --name pgshard2 -p 5433:5432 -d pgshard ``` The container exposes Postgres on port 5432 internally, and maps it to 5433 on your host.
- ```podman run --name pgshard3 -p 5434:5432 -d pgshard ``` The container exposes Postgres on port 5432 internally, and maps it to 5434 on your host.
- ```podman run --name pgshard4 -p 5435:5432 -d pgshard ``` The container exposes Postgres on port 5432 internally, and maps it to 5435 on your host.
