### with causal consistency what is the probelm associated with it 
- aggregation is real issue here , lets say we have query to perform order is write(1,23), sum(), sum(), write(2,34), write(3,24), sum()
- now in this even when ordering of execution is segregated for each of the ids , there are chances of sum() of all the ids values will be wrong, what if all the sum's response is being returned before the write
- the result of sum now depends on the permuation of requests being executed in which order

### so to solve this problem we can use another consistency which is quorum 
- Quorum consistency works on the majority of responses
- first it will have multiple replicas of databases, and these replicas may not be consistent also
- lets say we query for key 4 and this will be queried upon all the dbs and get the result as 40, 60, 40, majority has 40 then 40 will be returned , it could also be the situation where you can see the timesamp , the one with the latest will be returned

### why is this eventually consistent
- if one of the node crashes, then you get the reposne as 40, 40 from two dbs for key 2 so you return 40 ,hence it is eventually consistency
- but we can make strong consistency how, lets say we predefined number of replicas , N=3
- then R+W > N i am writing to one node then W = 1, Reading from two node R = 2
- in case of failure we get R = 2 which had returned me 40, 40 R+W > N 2 + 1 >3 false then this entire requests will fail return 503 may be unavailable right now
- we can also change the formula according to our need
- quorum : It gives you fault tolerance by default depending on the quorum you choose , lets say you choose strong consistency then R+W > N in some case if server crashes you might have to throw error
- but in case of R+W < N you will get eventual consistency , high fault tolerance

### Quorum gives you the power to have a customized balance in consistency and efficiency of the system (based on requirement we can always update Reader and writer in this formula (R+W <= N))

### Disadvantage of quorum are:
- cost of implementation is high
- we need multiple replicas
- Even number of replicas can cause split brain problem


### Tradeoff
- When R + W < N:
    - ✅ Higher availability
    - ✅ More fault tolerance (tolerates more node failures)
    - ❌ Weaker consistency (may read stale data)

- When R + W > N:
    - ✅ Strong consistency
    - ❌ Lower fault tolerance (need more nodes to be up)
