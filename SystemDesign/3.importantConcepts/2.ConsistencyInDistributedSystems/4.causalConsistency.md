- we can improve on consistency level, take the first request which is Read(1), key 2 is not relevant for us, id 1 is the customer and we only care about this right now lets say
- so first come read(1) , write(1,31), then read(1) output you are expecting, read(1) = 21, write(31), then read(1) =  31, this is what we want
- in case linearizability, we will see the first request will be blocker for all other requests
- for example final read(1) , is getting blocked by other requests which not even relevant to 1 key , there could be case that Read(2), write(2,17), might fail in that case also read(1) is getting blocked
- so what you want you want to extract this request with id here 1 all the request with id 1 , read(1), write(1,31), read(1) , you want to order these reqeusts sequentially , and same with id 2 requests
- this ordering of reqeuests sequentially is known as causal consistency
- if a request A related to the requests before the reqeust A , then  it has be processed before A request , causal consistency is about cause and effect
- so these order of requests will be processed on the same server , or same thread , there will be lock the respective key, there will be global lock on the key once executed lock will be released
- read(1), write(1,31), read(1) these are the operations for which it will execute sequentially , lets say read(1) comes lock this key in db , reads it then response is being sent, then comes write(1,31) locks the id 1 updates it to 31 lock is released after update, then read comes again locaks the key 1 and then reads the data as 31
- same way for key 2, but what if 3 requests for key 2 happening simultaneously these request are Write(2,7), Read(2), Read(2), write(2,44)
- now 1st requests goes and update 2 value to 7 and now read(2), read(2), write(2,44) is getting processed simultaneously
- then consistency guarantee of causal consistency is broken, because what if write(2,44) is being done first it locks and then updates it  and then read is being performed it will give us value of 17, so causal consistency is not possible in this global lock
- for causal consistency lock is not what you are looking for , it is the ordering of requests

### How is causal consistency better that other two (linearizable and eventual consistency)
- causal consistency is more consistent that eventual consistency , because reqeusts with same key is being performed sequentially
- also more efficient than linearizable consistency because in this we are not blocking all the other reqeusts , request with the same is being executed and other reqeust with different key can also be executed simulatneously

![image](https://github.com/user-attachments/assets/3d2e82ab-62f3-4263-903f-064700f3ed3c)

