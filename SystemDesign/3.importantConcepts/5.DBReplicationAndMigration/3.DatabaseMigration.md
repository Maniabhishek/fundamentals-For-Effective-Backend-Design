- well if we want to migrate a db which is currently running , the best way if your service is not so criticial and can stop server and dbs for some time then first thing we will do is to stop the db from any read request or any write request, now we can take the db dump and export it
- now with that dump we will import all these dump to another db in any other region or something, it could be bulk upload
- it was simple when we were able to stop db from processing any request , but what if there is an application where we cannot stop db from processing
- in such a situation we will first , at any moment we start the migration we take the timestamp lets say x and all the data before that timestamp needs to migrated to another db
- now while the migration was in progress there were some more data that came in to primary db , now what we can do all the data after x and before y (current time when another migration starts) we will start the migrations
- and at the same time , we will also add one trigger so that any new data coming into primary database will also be reflected into the migration db
- now lets say when we are migating , lets one particualr record which got copied to new db and after this copy a new update came in primary db , what will happen, now when we say db-copy what i mean is there is going to be a log in the database alog of operations, this exists in  my sql , cassandra , it exists in most of the dbs, so all sorts of operations are logged in the databases and you can use this to recreate a database the same data structre is going to be used in new db
- DB-Copy
    - Db-copy to new DB (few hours)
    - DB-copy with timestamps > x
    - Add and insert and update trigger to old - db
    - migrate all the missing records from old to new , timestamps > Y and timestamp < Z

### Migrating Database
- now lets say we have 3 servers pointing to one db (table has A and B) , and we want to migrate to new db lets say with extra field in it (lets say here we have A,B,C) now how are going to make these servers point to new db
- doing so might have some data inconsistency
- so what we can do we can do the migration of db into new database as we saw above, once done we can create a view similar to old table with same A and B view , once we have the view ready we can start services pointing to views, now any update coming to primary will also be copied to the new and then to the view
- service which will have the code as per old table will now point to view and can perform the same way
- now we can make the code changes to the services and migrate to the new db 
-  steps to do so
      -  create a view behaving like the old table
      -  rename the view to old table , and rename the old table to obsolete
      -  restart servers with new code pointing to new table
      -  drop the view
      -  manual or automated validation of data

<img width="500" height="500" alt="image" src="https://github.com/user-attachments/assets/1ce069bd-2cd9-43b5-bdcf-cd6565891749" />

